# 2.1 Creating a drawing surface

The aim of this starting program is to run through the Java Swing code needed to open a window and create a drawing surface. Program Listings 2.1-2.3 (A01.java) open a window and attach an OpenGL canvas and event listener. Nothing is drawn on the canvas area at this stage (Figure 2.4). However, this program can be used to check that you have set up the relevant system programming environment paths for JOGL (see Appendix A) and thus the program compiles. We'll use this program to explain some of the housekeeping associated with setting up a window - this code will appear in many of your future programs. (Note: the download files - A01.java and A01_GLEventListener.java - have some extra explanatory comments in the code.)

##  2.1.1 Importing Java packages

First, a number of packages need to be imported (see Program Listing 2.1). These give access to the OpenGL API and also the standard Java routines for creating a window and detecting events on that window (e.g. the window closing event, triggered, for example, in Microsoft Windows by clicking on the cross at the right end of the window title bar). If you don't know how to use Java AWT and Java Swing, then you will need to do some background reading, as I will be focussing on the OpenGL aspects. For now, you can just reuse the same code in each of your programs.

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.JFrame;
import com.jogamp.opengl.GLAutoDrawable;
import com.jogamp.opengl.GLCapabilities;
import com.jogamp.opengl.GLProfile;
import com.jogamp.opengl.GLEventListener;
import com.jogamp.opengl.awt.GLCanvas;
import com.jogamp.opengl.util.FPSAnimator;

public class A01 extends JFrame {
  // ...
}
```

**Program Listing 2.1:** Part of A01.java: Importing packages

I have separately listed individual classes in the import statements. An alternative is to use `java.awt.*` and `java.awt.event.*` and `com.jogamp.opengl.*` and `com.jogamp.opengl.util.*` and so on. The use of the wildcard `.*` will mean that the compiler will then decide which classes need to be imported based on the rest of the program code in this file.

To create the window, we use Java Swing's `JFrame` class. The main class `A01` extends the `JFrame` class, so the code to create the frame is inherited when the constructor is called (see Program Listing 2.2).

```
public class A01 extends JFrame {
private static final int WIDTH = 1024;
private static final int HEIGHT = 768;
private static final Dimension dimension = new Dimension(WIDTH, HEIGHT);

private GLCanvas canvas;
private GLEventListener glEventListener;

private final FPSAnimator animator;

public static void main(String[] args) {
  A01 f = new A01("A01");
  f.getContentPane().setPreferredSize(dimension);
  f.pack();
  f.setVisible(true);
}

public A01(String textForTitleBar) {
  // ...
}
```

**Program Listing 2.2:** Part of A01.java: Creating a Frame

A number of private attributes are declared in the `A01` class. One static attribute is the dimensions of the window that will be created. One is the `canvas` which will be drawn on. A third, `animator`, will be used to create a display loop, i.e. a loop that is executed n times per second to display whatever needs to be drawn (see more detail later). `glEventListener` will be explained later. The main entry point to the class creates an instance of the `A01` class (i.e. a frame), sets its size, uses `pack` to make sure that all the contents of the frame are at or above their preferred sizes, and then makes the frame visible.

 The `A01` constructor is given in Program Listing 2.3. This sets certain parameters and adds widgets and listeners to the frame (i.e. the window). Line 2 sets the text displayed in the title bar using the superclass. Before considering the remaining lines, read the text on OpenGL profiles.

| OpenGL versions |   |
| --------------- | - |
| 1.0-1.5 | Fixed function pipeline |
| 2.0-2.1 | Support for programmable shaders</td>
| 3.0 | Adopts deprecation model (fixed function deprecated), but retains backward compatibility |
| 3.x | Fixed function pipeline and associated functions removed (but can be accessed using a compatibility context) |
| 4.x | Geometry and tessellation shaders |
| ES 1.x | Fixed-function version (stripped down) |
| ES 2.x | Programmable shader version |
| ES 3.x | Geometry and tessellation shaders |
          
**Table 2.1.** OpenGL versions (see [relation to JOGL](http://jogamp.org/jogl/doc/Overview-OpenGL-Evolution-And-JOGL.html))(ES = embedded systems)

 OpenGL continues to evolve, with new versions adding functionality and even deprecating functionality. New functionality may only be available on certain hardware, and it must be possible to continue to use existing hardware. Thus, a programmer must be given control over which version of OpenGL to use. This is done using `GLProfile`. A programmer can choose to set a particular OpenGL version. It is even possible to write code for different versions of OpenGL and choose which code to execute at run time. In JOGL, the following code would select the desktop OpenGL core profile 3.x, for x>=1: `GLProfile.get(GLProfile.GL3)`

```
public A01(String textForTitleBar) {
  super(textForTitleBar);                                // line 2
  GLCapabilities glcapabilities                          // line 3
    = new GLCapabilities(GLProfile.get(GLProfile.GL3));  // line 4
  canvas = new GLCanvas(glcapabilities);                 // line 5
  glEventListener = new A01_GLEventListener();           // line 6
  canvas.addGLEventListener(glEventListener);            // line 7
  getContentPane().add(canvas, BorderLayout.CENTER);     // line 8
  addWindowListener(new WindowAdapter() {                // line 9
    public void windowClosing(WindowEvent e) {           // line 10
      animator.stop();                                   // line 11
      remove(canvas);                                    // line 12
      dispose();                                         // line 13
      System.exit(0);                                    // line 14
    }                                                    // line 15
  });                                                    // line 16
  animator = new FPSAnimator(canvas, 60);                // line 17
  animator.start();                                      // line 18
}
```

**Program Listing 2.3:** The A01 constructor

## 2.1.2 A drawing surface

